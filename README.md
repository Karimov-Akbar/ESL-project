# ESL Test Project: Custom Click/Hold Logic (PCA10059)

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞–º–∏ nRF52840 Dongle (PCA10059) –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª–æ–≥–∏–∫–∏ "–ö–æ—Ä–æ—Ç–∫–∏–π –∫–ª–∏–∫" –∏ "–£–¥–µ—Ä–∂–∞–Ω–∏–µ" —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –¥—Ä–∞–π–≤–µ—Ä–æ–≤ GPIO HAL (Hardware Abstraction Layer) –∏ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–µ—Ä–∂–µ–∫ `nrf_delay` –¥–ª—è —Ç–∞–π–º–∏–Ω–≥–∞.

–ü—Ä–æ–µ–∫—Ç —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω —Å —É—á–µ—Ç–æ–º **—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ** —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤, –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—â–µ–≥–æ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –≤ nRF5 SDK.

## üí° –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

| –î–µ–π—Å—Ç–≤–∏–µ (–ö–Ω–æ–ø–∫–∞ SW1) | –ù–∞–±–ª—é–¥–∞–µ–º—ã–π –¶–≤–µ—Ç | –§–∏–∑–∏—á–µ—Å–∫–∏–π –ü–∏–Ω | –õ–æ–≥–∏–∫–∞ |
| :---: | :---: | :---: | :--- |
| **–ö–æ—Ä–æ—Ç–∫–∏–π –ö–ª–∏–∫** (50 –º—Å < T < 500 –º—Å) | **–ö—Ä–∞—Å–Ω—ã–π** | P0.08 | –ò–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ: –≤–∫–ª—é—á–∞–µ—Ç/–≤—ã–∫–ª—é—á–∞–µ—Ç –ö—Ä–∞—Å–Ω—ã–π LED. |
| **–£–¥–µ—Ä–∂–∞–Ω–∏–µ** (T > 500 –º—Å) | **–°–∏–Ω–∏–π** –∏ **–ó–µ–ª–µ–Ω—ã–π** | P1.09 –∏ P0.12 | –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–æ–ø–µ—Ä–µ–º–µ–Ω–Ω–æ–µ –º–∏–≥–∞–Ω–∏–µ –°–∏–Ω–µ–≥–æ –∏ –ó–µ–ª–µ–Ω–æ–≥–æ LED. –í—ã–∫–ª—é—á–∞–µ—Ç –ö—Ä–∞—Å–Ω—ã–π LED, –µ—Å–ª–∏ –æ–Ω –±—ã–ª –≤–∫–ª—é—á–µ–Ω. |

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

* **–¶–µ–ª–µ–≤–∞—è –ø–ª–∞—Ç–∞:** nRF52840 USB Dongle (PCA10059)
* **–°—Ä–µ–¥–∞:** nRF5 SDK (—Å–±–æ—Ä–∫–∞ —á–µ—Ä–µ–∑ GCC Makefile)
* **–¢–∞–π–º–∏–Ω–≥:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π —Å—á–µ—Ç—á–∏–∫ (`press_duration_ms`) —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 5 –º—Å (`nrf_delay_ms(5)`).

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–∏–Ω–æ–≤ –≤ –∫–æ–¥–µ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)

| –ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π | –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ü–∏–Ω | –§–∏–∑–∏—á–µ—Å–∫–∏–π –¶–≤–µ—Ç (–ù–∞–±–ª—é–¥–∞–µ–º—ã–π) | –†–æ–ª—å |
| :--- | :---: | :---: | :--- |
| `LED_CLICK_RED` | P0.08 | –ö—Ä–∞—Å–Ω—ã–π | LED –¥–ª—è –∫–ª–∏–∫–∞ |
| `LED_HOLD_BLUE` | P1.09 | –°–∏–Ω–∏–π | –ü–µ—Ä–≤—ã–π LED –¥–ª—è —É–¥–µ—Ä–∂–∞–Ω–∏—è |
| `LED_HOLD_GREEN` | P0.12 | –ó–µ–ª–µ–Ω—ã–π | –í—Ç–æ—Ä–æ–π LED –¥–ª—è —É–¥–µ—Ä–∂–∞–Ω–∏—è |

## üèóÔ∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–±–æ—Ä–∫–µ –∏ –ø—Ä–æ—à–∏–≤–∫–µ

–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ nRF5 SDK –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ –ø—É—Ç–∏ `/home/user/devel/esl-nsdk`.

### 1. –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `make`, —É–∫–∞–∑–∞–≤ –ø—É—Ç—å –∫ SDK:

```bash
make SDK_ROOT=/home/user/devel/esl-nsdk